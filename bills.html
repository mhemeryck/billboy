<!doctype html>
<title>billboy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--link type="text/css" href="{{ url_for('static', filename='style.css' )}}" rel="stylesheet"-->

<!-- signin: from bootstrap examples -->
<!--link type=text/css href="{{ url_for('static', filename='signin.css' )}}" rel="stylesheet"-->

<!-- jquery -->
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

<!-- bootstrap -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>

<!-- bootstrap date picker -->
<link href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.min.css" rel="stylesheet">
<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.js"></script>

<script>
	function copyFieldNames(pk) {

		var fieldNames = ["datepicker", "description", "amount", "paid_by"];
		for (var i = 0; i < fieldNames.length; i++) {
			var v = $( "#view-" + fieldNames[i] + "-" + pk ).html();
			$( "#edit-" + fieldNames[i] + "-" + pk ).val(v);
		}
	}

	$(function() {
		$( ".form-control.datepicker" ).datepicker({
			format: "yyyy-mm-dd",
			todayHighlight: true,
		});
		
		// hide all edit by default
		$( "tr.bill.edit" ).hide();
		
		// edit buttons
		$( "button[value=edit].bill.view" ).click( function() {
			var pk = $( this ).attr("pk");
			// switch other edit to view
			$( "tr[pk!=" + pk + "].bill.edit" ).hide();
			$( "tr[pk!=" + pk + "].bill.view" ).show	();
			// switch current view to edit
			$( "tr[pk=" + pk + "].bill.view" ).hide();
			$( "tr[pk=" + pk + "].bill.edit" ).show();
		});
		
		// delete buttons
		$( "button[value=delete].bill.view" ).click( function() {
			var pk = $( this ).attr("pk");
			alert("do delete for " + pk);
		});

		// cancel buttons
		$( "button[value=cancel].bill.edit" ).click( function() {
			var pk = $( this ).attr("pk");
			// switch edit back to view
			$( "tr[pk=" + pk + "].bill.edit" ).hide();
			$( "tr[pk=" + pk + "].bill.view" ).show();
		});
		
		// update buttons
		$( "button[value=update].bill.edit" ).click( function() {
			var pk = $( this ).attr("pk");
			alert("do update for " + pk);
		});

	});
</script>

<body>
    <div class="container">
        <div class="page-header">
            <h1>billboy <small>only manages the bills</small></h1>
        </div>

        <ul class="nav nav-tabs">
          <li class="active"><a href="#">Bills</a	></li>
          <li><a href="#">Stats</a></li>
          <li><a href="#">Settings</a></li>
        </ul>
        
        <div class="panel panel-default">
            <div class="panel-heading">Bills</div>
            <div class="panel-body">
                <form action="" method="post" class="form-inline" role="form">
                    <div class="form-group">
                        <input name="date" type="date" class="form-control datepicker" placeholder="Date">
                    </div>
                    <div class="form-group">
                        <input name="description" type="text" class="form-control" placeholder="Description">
                    </div>
                    <div class="form-group">
                        <input name="amount" type="number" class="form-control" placeholder="Amount">
                    </div>
                    <div class="form-group">
                        <select name="paid_by" class="form-control" placeholder="Paid By">
                            <option>katrien</option>
                            <option>martijn</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button type="submit" value="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
            
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Description</th>
                        <th>Amount</th>
                        <th>Paid by</th>
						<th>Edit</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="bill view" pk="1">
                        <td>2013-12-31</td>
                        <td>Carrefour</td>
                        <td>5</td>
                        <td>martijn</td>
						<td>
							<div class="form-group">
								<button type="button" value="edit" class="btn btn-primary bill view" pk="1">Edit</button>
								<button type="button" value="delete" class="btn btn-danger bill view" pk="1">Delete</button>
							</div>
						</td>
                    </tr>
					
                    <tr class="bill edit" pk="1">
                        <form action="" method="post" class="form-inline" role="form">
                            <td>
                                <div class="form-group">
                                    <input name="date" type="text" class="form-control datepicker" placeholder="Date" value="2013-12-31">
                                </div>
                            </td>
                            <td>
                                <div class="form-group">
                                    <input name="description" type="text" class="form-control" placeholder="Description" value="Carrefour">
                                </div>
                            </td>
                            <td>
                                <div class="form-group">
                                    <input name="amount" type="number" class="form-control" placeholder="Amount" value="5">
                                </div>
                            </td>
                            <td>
                                <div class="form-group">
                                    <select name="paid_by" class="form-control" placeholder="Paid By" value="martijn">
                                        <option>katrien</option>
                                        <option>martijn</option>
                                    </select>
                                </div>
                            </td>
							<td>
								<div class="form-group">
									<button type="button" value="cancel" class="btn btn-default bill edit" pk="1">Cancel</button>
									<button type="button" value="update" class="btn btn-primary bill edit" pk="1">Update</button>
								</div>
							</td>
                        </form>
                    </tr>
					
					<tr class="bill view" pk="2">
                        <td>2014-01-02</td>
                        <td>Colruyt</td>
                        <td>20.05</td>
                        <td>martijn</td>
						<td>
							<div class="form-group">
								<button type="button" value="edit" class="btn btn-primary bill view" pk="2">Edit</button>
								<button type="button" value="delete" class="btn btn-danger bill view" pk="2">Delete</button>
							</div>
						</td>
                    </tr>        
                    <tr class="bill edit" pk="2">
                        <form action="" method="post" class="form-inline" role="form">
                            <td>
                                <div class="form-group">
                                    <input name="date" type="text" class="form-control datepicker" placeholder="Date" value="2014-01-02">
                                </div>
                            </td>
                            <td>
                                <div class="form-group">
                                    <input name="description" type="text" class="form-control" placeholder="Description" value="Colruyt">
                                </div>
                            </td>
                            <td>
                                <div class="form-group">
                                    <input name="amount" type="number" class="form-control" placeholder="Amount" value="20.05">
                                </div>
                            </td>
                            <td>
                                <div class="form-group">
                                    <select name="paid_by" class="form-control" placeholder="Paid By" value="martijn">
                                        <option>katrien</option>
                                        <option>martijn</option>
                                    </select>
                                </div>
                            </td>
							<td>
								<div class="form-group">
									<button type="button" value="cancel" class="btn btn-default bill edit" pk="2">Cancel</button>
									<button type="button" value="update" class="btn btn-primary bill edit" pk="2">Update</button>
								</div>
							</td>
                        </form>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
